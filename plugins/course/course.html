<div class="panel-content course" data-id="<%= course.id %>">
    <div class="top">
    <a href="#" title="Back" id="back"></a>
    <div class="header">
        <h2 class="name"><%= course.fullname %></h2>
        <div class="completion">Completed x of y activities</div>
            <% _.each(course.contents, function(section, i) { %>
                <% if (i == 0) { %>
                    <div class="course-sections">
                        <div class="section-<%= i %>" data-id="<%= section.id %>">
                        <div class="summary"><%= course.contents[0].summary %></div>
                            <ul class="items">
                                <% _.each(section.modules, function(module) { %>
                                <li class="item" data-id="<%= module.id %>">
                                    <img src="<%= module.modicon %>" alt="Course Icon" />
                                    <div>
                                    <% if (module.visible) { %>
                                        <% if (['feedback', 'scorm', 'page', 'label', 'url'].indexOf(module.modname) >= 0) { %>
                                            <a href="#<%= module.modname %>/<%= module.id %>">
						                        <%= module.name %>
						                    </a>
						                <% } else { %>
                                        	<a href="#courses/<%= course.id %>/unsupported-activity/<%= module.id %>">
												<%= module.name %>
											</a>
										<% } %>
                                    <% } else { %>
                                        <span><%= module.name %></span>
                                    <% } %>
                                    <div class="detail">
                                    <% _.each(module.contents, function(module_content) { %>
                                        <% if (module_content.filesize > 0) { %>
                                        	<span><%= MM.lang.s("filesize") %><%= module_content.filesize %><%= MM.lang.s("filesizeunit") %></span>
                                        <% } %>
                                        <% if (!module.visible) { %>
                                        	<span><%= MM.lang.s("itemnotviewable") %></span>
                                    	<% } %>
										<% if (module.completion) { %>
								        	<input type="checkbox" class="set-activity-completion" data-cmid="<%= module.id %>" />
								        <% } %>
                                    <% }); %>
									</div>
                                    </div>
                                </li>
                                <% }); %>
                            </ul>
                        </div>
                    </div>
                <% } %>
            <% }); %>
        </div>
    </div>
    <ul class="course-sections sections nav nav-v js-accordion">
        <% _.each(course.contents, function(section, i) { %>
            <% if (i > 0) { %>
            <li class="section-<%= i %> nav-item" data-id="<%= section.id %>">
                <div class="name toogler expand touch-row">
                    <h3 class="topic-title">
                    <a href="#">
                        <%= section.name %>
                    </a>
                    </h3>
                    <div class="number-of-courses">
                        <%= course.contents[i].modules.length %>
                    </div>
                    <a href="#" class="close toogler collapse touch-row" ><%= MM.lang.s("close") %></a>
                </div>
                <ul class="nav submenu items">
                    <% _.each(section.modules, function(module) { %>
                    <li class="item" data-id="<%= module.id %>">
                        <img src="<%= module.modicon %>" alt="Course Icon" />
                        <div>
                            <% if (module.visible) { %>
                                <% if (['feedback', 'scorm', 'page', 'label', 'url'].indexOf(module.modname) >= 0) { %>
                                    <a href="#<%= module.modname %>/<%= module.id %>">
                                        <%= module.name %>
                                    </a>
                                <% } else { %>
                                    <a href="#courses/<%= course.id %>/unsupported-activity/<%= module.id %>">
                                        <%= module.name %>
                                    </a>
                                <% } %>
                            <% } else { %>
                                <span><%= module.name %></span>
                            <% } %>
                            <div class="detail">
                            <% _.each(module.contents, function(module_content) { %>
                                <% if (module_content.filesize > 0) { %>
                                <span><%= MM.lang.s("filesize") %><%= module_content.filesize %><%= MM.lang.s("filesizeunit") %></span>
                                <% } %>
                                <% if (!module.visible) { %>
                                <span><%= MM.lang.s("itemnotviewable") %></span>
                                <% } %>
                            <% }); %>
                            </div>
                        </div>
                        <% // ToDo - Replace with activity instead of course completion. %>
                        <% if (course.started == 1) { %>
                        <span class="completion-inprogress"></span>
                        <% } else if (course.completed == 1) { %>
                        <span class="completion-complete"></span>
                        <% } else { %>
                        <span class="completion-notstarted"></span>
                        <% } %>
                    </li>
                    <% }); %>
                </ul>
            </li>
            <% } %>
        <% }); %>
    </ul>
</div>
